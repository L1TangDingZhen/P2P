{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\11427\\\\Desktop\\\\P2P\\\\p2p-client\\\\src\\\\components\\\\DeviceStatus.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Badge } from 'react-bootstrap';\nimport SignalRService from '../services/SignalRService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeviceStatus = ({\n  authInfo\n}) => {\n  _s();\n  const [onlineDevices, setOnlineDevices] = useState([]);\n  const {\n    deviceId\n  } = authInfo; // 删除未使用的userId变量\n\n  useEffect(() => {\n    // Register event handlers\n    SignalRService.on('onOnlineDevices', handleOnlineDevices);\n    SignalRService.on('onDeviceStatusChanged', handleDeviceStatusChanged);\n    return () => {\n      // Clean up\n      SignalRService.on('onOnlineDevices', null);\n      SignalRService.on('onDeviceStatusChanged', null);\n    };\n  }, []);\n  const handleOnlineDevices = devices => {\n    setOnlineDevices(devices);\n  };\n  const handleDeviceStatusChanged = (changedDeviceId, isOnline) => {\n    setOnlineDevices(prev => {\n      // If device is coming online and not in list, add it\n      if (isOnline && !prev.find(d => d.id === changedDeviceId)) {\n        return [...prev, {\n          id: changedDeviceId,\n          lastActivity: new Date()\n        }];\n      }\n\n      // If device is going offline, remove it or update status\n      return prev.map(d => d.id === changedDeviceId ? {\n        ...d,\n        isOnline\n      } : d).filter(d => d.isOnline !== false);\n    });\n  };\n  const formatDeviceName = id => {\n    if (id === deviceId) {\n      return 'This device';\n    }\n    return `Device ${id.substring(0, 8)}...`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Device Status\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Your Device ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-muted\",\n        children: [deviceId.substring(0, 8), \"...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Connected Devices: \", onlineDevices.length, \"/2\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: onlineDevices.map(device => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(Badge, {\n          bg: \"success\",\n          className: \"me-2\",\n          children: \"Online\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), formatDeviceName(device.id)]\n      }, device.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(DeviceStatus, \"GFtS9NZZs4CQ4AXQuRPFYLHb4xk=\");\n_c = DeviceStatus;\nexport default DeviceStatus;\nvar _c;\n$RefreshReg$(_c, \"DeviceStatus\");","map":{"version":3,"names":["React","useState","useEffect","Badge","SignalRService","jsxDEV","_jsxDEV","DeviceStatus","authInfo","_s","onlineDevices","setOnlineDevices","deviceId","on","handleOnlineDevices","handleDeviceStatusChanged","devices","changedDeviceId","isOnline","prev","find","d","id","lastActivity","Date","map","filter","formatDeviceName","substring","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","device","bg","_c","$RefreshReg$"],"sources":["C:/Users/11427/Desktop/P2P/p2p-client/src/components/DeviceStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Badge } from 'react-bootstrap';\r\nimport SignalRService from '../services/SignalRService';\r\n\r\nconst DeviceStatus = ({ authInfo }) => {\r\n  const [onlineDevices, setOnlineDevices] = useState([]);\r\n  const { deviceId } = authInfo; // 删除未使用的userId变量\r\n\r\n  useEffect(() => {\r\n    // Register event handlers\r\n    SignalRService.on('onOnlineDevices', handleOnlineDevices);\r\n    SignalRService.on('onDeviceStatusChanged', handleDeviceStatusChanged);\r\n\r\n    return () => {\r\n      // Clean up\r\n      SignalRService.on('onOnlineDevices', null);\r\n      SignalRService.on('onDeviceStatusChanged', null);\r\n    };\r\n  }, []);\r\n\r\n  const handleOnlineDevices = (devices) => {\r\n    setOnlineDevices(devices);\r\n  };\r\n\r\n  const handleDeviceStatusChanged = (changedDeviceId, isOnline) => {\r\n    setOnlineDevices(prev => {\r\n      // If device is coming online and not in list, add it\r\n      if (isOnline && !prev.find(d => d.id === changedDeviceId)) {\r\n        return [...prev, { id: changedDeviceId, lastActivity: new Date() }];\r\n      }\r\n      \r\n      // If device is going offline, remove it or update status\r\n      return prev.map(d => \r\n        d.id === changedDeviceId ? { ...d, isOnline } : d\r\n      ).filter(d => d.isOnline !== false);\r\n    });\r\n  };\r\n\r\n  const formatDeviceName = (id) => {\r\n    if (id === deviceId) {\r\n      return 'This device';\r\n    }\r\n    return `Device ${id.substring(0, 8)}...`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-4\">\r\n      <h4>Device Status</h4>\r\n      <p>Your Device ID: <span className=\"text-muted\">{deviceId.substring(0, 8)}...</span></p>\r\n      <p>\r\n        Connected Devices: {onlineDevices.length}/2\r\n      </p>\r\n      \r\n      <div>\r\n        {onlineDevices.map(device => (\r\n          <div key={device.id} className=\"mb-2\">\r\n            <Badge bg=\"success\" className=\"me-2\">Online</Badge>\r\n            {formatDeviceName(device.id)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeviceStatus;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
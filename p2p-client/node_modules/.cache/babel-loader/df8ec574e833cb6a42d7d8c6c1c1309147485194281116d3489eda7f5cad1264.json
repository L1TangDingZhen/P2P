{"ast":null,"code":"import * as signalR from '@microsoft/signalr';\nclass SignalRService {\n  constructor() {\n    this.connection = null;\n    this.connectionPromise = null;\n    this.reconnectAttempts = 0;\n    this.eventHandlers = {\n      onReceiveMessage: null,\n      onReceiveFileMetadata: null,\n      onReceiveFileChunk: null,\n      onFileTransferComplete: null,\n      onDeviceStatusChanged: null,\n      onOnlineDevices: null,\n      onError: null,\n      onConnectionClosed: null,\n      onConnectionEstablished: null\n    };\n  }\n  startConnection(userId, deviceId) {\n    if (this.connectionPromise) {\n      return this.connectionPromise;\n    }\n    console.log('Starting SignalR connection for user:', userId);\n    try {\n      // 使用当前网页的主机名构建API URL\n      const currentHost = window.location.hostname;\n      // 如果是本地主机，使用localhost:5235，否则使用当前主机名配合5235端口\n      const apiUrl = currentHost === 'localhost' ? 'http://localhost:5235' : `http://${currentHost}:5235`;\n      console.log(`Using SignalR hub URL: ${apiUrl}/p2phub`);\n\n      // 使用长轮询作为备选方案\n      this.connection = new signalR.HubConnectionBuilder().withUrl(`${apiUrl}/p2phub`, {\n        skipNegotiation: false,\n        // 启用所有传输类型，优先WebSockets，备选长轮询\n        transport: signalR.HttpTransportType.WebSockets | signalR.HttpTransportType.LongPolling\n      }).withAutomaticReconnect().configureLogging(signalR.LogLevel.Information).build();\n      console.log('SignalR connection object built');\n      this.setupEventHandlers();\n    } catch (error) {\n      console.error('Error building SignalR connection:', error);\n      throw error;\n    }\n    this.connectionPromise = this.connection.start().then(() => {\n      console.log('SignalR connected!');\n      this.connection.onclose(error => {\n        console.log('SignalR connection closed', error);\n        this.connectionPromise = null;\n        // 当连接关闭时，触发事件\n        if (this.eventHandlers.onConnectionClosed) {\n          this.eventHandlers.onConnectionClosed(error);\n        }\n      });\n      return this.registerConnection(userId, deviceId);\n    }).catch(err => {\n      console.error('SignalR connection error:', err);\n      this.connectionPromise = null;\n      // 尝试最多重连3次\n      if (this.reconnectAttempts < 3) {\n        this.reconnectAttempts++;\n        console.log(`Reconnection attempt ${this.reconnectAttempts}/3...`);\n        return new Promise(resolve => {\n          setTimeout(() => {\n            resolve(this.startConnection(userId, deviceId));\n          }, 2000);\n        });\n      }\n      throw err;\n    });\n    return this.connectionPromise;\n  }\n  setupEventHandlers() {\n    this.connection.on('ReceiveMessage', message => {\n      if (this.eventHandlers.onReceiveMessage) {\n        this.eventHandlers.onReceiveMessage(message);\n      }\n    });\n    this.connection.on('ReceiveFileMetadata', message => {\n      if (this.eventHandlers.onReceiveFileMetadata) {\n        this.eventHandlers.onReceiveFileMetadata(message);\n      }\n    });\n    this.connection.on('ReceiveFileChunk', (senderDeviceId, fileChunk) => {\n      if (this.eventHandlers.onReceiveFileChunk) {\n        this.eventHandlers.onReceiveFileChunk(senderDeviceId, fileChunk);\n      }\n    });\n    this.connection.on('FileTransferComplete', fileId => {\n      if (this.eventHandlers.onFileTransferComplete) {\n        this.eventHandlers.onFileTransferComplete(fileId);\n      }\n    });\n    this.connection.on('DeviceStatusChanged', (deviceId, isOnline) => {\n      if (this.eventHandlers.onDeviceStatusChanged) {\n        this.eventHandlers.onDeviceStatusChanged(deviceId, isOnline);\n      }\n    });\n    this.connection.on('OnlineDevices', devices => {\n      if (this.eventHandlers.onOnlineDevices) {\n        this.eventHandlers.onOnlineDevices(devices);\n      }\n    });\n    this.connection.on('Error', message => {\n      console.error('Hub error:', message);\n      if (this.eventHandlers.onError) {\n        this.eventHandlers.onError(message);\n      }\n    });\n  }\n  async registerConnection(userId, deviceId) {\n    console.log('Registering connection for userId:', userId, 'deviceId:', deviceId);\n    try {\n      await this.connection.invoke('RegisterConnection', userId, deviceId);\n      console.log('Connection registered successfully');\n    } catch (error) {\n      console.error('Error registering connection:', error);\n      throw error;\n    }\n  }\n  async sendMessage(userId, deviceId, messageContent) {\n    await this.ensureConnection();\n    return this.connection.invoke('SendMessage', userId, deviceId, messageContent);\n  }\n  async sendFileMetadata(userId, deviceId, fileMetadata) {\n    await this.ensureConnection();\n    return this.connection.invoke('SendFileMetadata', userId, deviceId, fileMetadata);\n  }\n  async sendFileChunk(userId, deviceId, fileId, chunk, chunkIndex, totalChunks) {\n    await this.ensureConnection();\n    return this.connection.invoke('SendFileChunk', userId, deviceId, fileId, chunk, chunkIndex, totalChunks);\n  }\n  async ensureConnection() {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      throw new Error('SignalR connection not established. Call startConnection first.');\n    }\n  }\n  on(eventName, callback) {\n    if (this.eventHandlers.hasOwnProperty(eventName)) {\n      this.eventHandlers[eventName] = callback;\n    } else {\n      console.warn(`Unknown event name: ${eventName}`);\n    }\n  }\n  stopConnection() {\n    if (this.connection) {\n      this.connection.stop();\n      this.connection = null;\n      this.connectionPromise = null;\n    }\n  }\n}\n\n// 创建实例并导出，避免匿名默认导出\nconst signalRService = new SignalRService();\nexport default signalRService;","map":{"version":3,"names":["signalR","SignalRService","constructor","connection","connectionPromise","reconnectAttempts","eventHandlers","onReceiveMessage","onReceiveFileMetadata","onReceiveFileChunk","onFileTransferComplete","onDeviceStatusChanged","onOnlineDevices","onError","onConnectionClosed","onConnectionEstablished","startConnection","userId","deviceId","console","log","currentHost","window","location","hostname","apiUrl","HubConnectionBuilder","withUrl","skipNegotiation","transport","HttpTransportType","WebSockets","LongPolling","withAutomaticReconnect","configureLogging","LogLevel","Information","build","setupEventHandlers","error","start","then","onclose","registerConnection","catch","err","Promise","resolve","setTimeout","on","message","senderDeviceId","fileChunk","fileId","isOnline","devices","invoke","sendMessage","messageContent","ensureConnection","sendFileMetadata","fileMetadata","sendFileChunk","chunk","chunkIndex","totalChunks","state","HubConnectionState","Connected","Error","eventName","callback","hasOwnProperty","warn","stopConnection","stop","signalRService"],"sources":["C:/Users/11427/Desktop/P2P/p2p-client/src/services/SignalRService.js"],"sourcesContent":["import * as signalR from '@microsoft/signalr';\r\n\r\nclass SignalRService {\r\n  constructor() {\r\n    this.connection = null;\r\n    this.connectionPromise = null;\r\n    this.reconnectAttempts = 0;\r\n    this.eventHandlers = {\r\n      onReceiveMessage: null,\r\n      onReceiveFileMetadata: null,\r\n      onReceiveFileChunk: null,\r\n      onFileTransferComplete: null,\r\n      onDeviceStatusChanged: null,\r\n      onOnlineDevices: null,\r\n      onError: null,\r\n      onConnectionClosed: null,\r\n      onConnectionEstablished: null\r\n    };\r\n  }\r\n\r\n  startConnection(userId, deviceId) {\r\n    if (this.connectionPromise) {\r\n      return this.connectionPromise;\r\n    }\r\n\r\n    console.log('Starting SignalR connection for user:', userId);\r\n    \r\n    try {\r\n      // 使用当前网页的主机名构建API URL\r\n      const currentHost = window.location.hostname;\r\n      // 如果是本地主机，使用localhost:5235，否则使用当前主机名配合5235端口\r\n      const apiUrl = currentHost === 'localhost' ? \r\n        'http://localhost:5235' : \r\n        `http://${currentHost}:5235`;\r\n        \r\n      console.log(`Using SignalR hub URL: ${apiUrl}/p2phub`);\r\n      \r\n      // 使用长轮询作为备选方案\r\n      this.connection = new signalR.HubConnectionBuilder()\r\n        .withUrl(`${apiUrl}/p2phub`, {\r\n          skipNegotiation: false,\r\n          // 启用所有传输类型，优先WebSockets，备选长轮询\r\n          transport: signalR.HttpTransportType.WebSockets | signalR.HttpTransportType.LongPolling\r\n        })\r\n        .withAutomaticReconnect()\r\n        .configureLogging(signalR.LogLevel.Information)\r\n        .build();\r\n        \r\n      console.log('SignalR connection object built');\r\n      \r\n      this.setupEventHandlers();\r\n    } catch (error) {\r\n      console.error('Error building SignalR connection:', error);\r\n      throw error;\r\n    }\r\n\r\n    this.connectionPromise = this.connection.start()\r\n      .then(() => {\r\n        console.log('SignalR connected!');\r\n        this.connection.onclose(error => {\r\n          console.log('SignalR connection closed', error);\r\n          this.connectionPromise = null;\r\n          // 当连接关闭时，触发事件\r\n          if (this.eventHandlers.onConnectionClosed) {\r\n            this.eventHandlers.onConnectionClosed(error);\r\n          }\r\n        });\r\n        return this.registerConnection(userId, deviceId);\r\n      })\r\n      .catch(err => {\r\n        console.error('SignalR connection error:', err);\r\n        this.connectionPromise = null;\r\n        // 尝试最多重连3次\r\n        if (this.reconnectAttempts < 3) {\r\n          this.reconnectAttempts++;\r\n          console.log(`Reconnection attempt ${this.reconnectAttempts}/3...`);\r\n          return new Promise(resolve => {\r\n            setTimeout(() => {\r\n              resolve(this.startConnection(userId, deviceId));\r\n            }, 2000);\r\n          });\r\n        }\r\n        throw err;\r\n      });\r\n\r\n    return this.connectionPromise;\r\n  }\r\n\r\n  setupEventHandlers() {\r\n    this.connection.on('ReceiveMessage', message => {\r\n      if (this.eventHandlers.onReceiveMessage) {\r\n        this.eventHandlers.onReceiveMessage(message);\r\n      }\r\n    });\r\n\r\n    this.connection.on('ReceiveFileMetadata', message => {\r\n      if (this.eventHandlers.onReceiveFileMetadata) {\r\n        this.eventHandlers.onReceiveFileMetadata(message);\r\n      }\r\n    });\r\n\r\n    this.connection.on('ReceiveFileChunk', (senderDeviceId, fileChunk) => {\r\n      if (this.eventHandlers.onReceiveFileChunk) {\r\n        this.eventHandlers.onReceiveFileChunk(senderDeviceId, fileChunk);\r\n      }\r\n    });\r\n\r\n    this.connection.on('FileTransferComplete', fileId => {\r\n      if (this.eventHandlers.onFileTransferComplete) {\r\n        this.eventHandlers.onFileTransferComplete(fileId);\r\n      }\r\n    });\r\n\r\n    this.connection.on('DeviceStatusChanged', (deviceId, isOnline) => {\r\n      if (this.eventHandlers.onDeviceStatusChanged) {\r\n        this.eventHandlers.onDeviceStatusChanged(deviceId, isOnline);\r\n      }\r\n    });\r\n\r\n    this.connection.on('OnlineDevices', devices => {\r\n      if (this.eventHandlers.onOnlineDevices) {\r\n        this.eventHandlers.onOnlineDevices(devices);\r\n      }\r\n    });\r\n\r\n    this.connection.on('Error', message => {\r\n      console.error('Hub error:', message);\r\n      if (this.eventHandlers.onError) {\r\n        this.eventHandlers.onError(message);\r\n      }\r\n    });\r\n  }\r\n\r\n  async registerConnection(userId, deviceId) {\r\n    console.log('Registering connection for userId:', userId, 'deviceId:', deviceId);\r\n    try {\r\n      await this.connection.invoke('RegisterConnection', userId, deviceId);\r\n      console.log('Connection registered successfully');\r\n    } catch (error) {\r\n      console.error('Error registering connection:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async sendMessage(userId, deviceId, messageContent) {\r\n    await this.ensureConnection();\r\n    return this.connection.invoke('SendMessage', userId, deviceId, messageContent);\r\n  }\r\n\r\n  async sendFileMetadata(userId, deviceId, fileMetadata) {\r\n    await this.ensureConnection();\r\n    return this.connection.invoke('SendFileMetadata', userId, deviceId, fileMetadata);\r\n  }\r\n\r\n  async sendFileChunk(userId, deviceId, fileId, chunk, chunkIndex, totalChunks) {\r\n    await this.ensureConnection();\r\n    return this.connection.invoke('SendFileChunk', userId, deviceId, fileId, chunk, chunkIndex, totalChunks);\r\n  }\r\n\r\n  async ensureConnection() {\r\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\r\n      throw new Error('SignalR connection not established. Call startConnection first.');\r\n    }\r\n  }\r\n\r\n  on(eventName, callback) {\r\n    if (this.eventHandlers.hasOwnProperty(eventName)) {\r\n      this.eventHandlers[eventName] = callback;\r\n    } else {\r\n      console.warn(`Unknown event name: ${eventName}`);\r\n    }\r\n  }\r\n\r\n  stopConnection() {\r\n    if (this.connection) {\r\n      this.connection.stop();\r\n      this.connection = null;\r\n      this.connectionPromise = null;\r\n    }\r\n  }\r\n}\r\n\r\n// 创建实例并导出，避免匿名默认导出\r\nconst signalRService = new SignalRService();\r\nexport default signalRService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
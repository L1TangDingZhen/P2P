# P2P文件传输系统测试指南

## 准备工作

1. **确认后端服务运行**：
   ```bash
   cd /mnt/c/Users/11427/desktop/P2P/P2P
   dotnet run
   ```

2. **启动前端服务**：
   ```bash
   cd /mnt/c/Users/11427/desktop/P2P/p2p-client
   npm start
   ```

## 测试步骤

### 1. 简单连接测试

首先，在所有测试设备上打开浏览器，访问：
```
http://172.22.226.182:3000
```

### 2. 生成邀请码测试

1. 在**设备A**上：
   - 点击"Generate New Code"按钮
   - 记录生成的邀请码（例如：ABC12345）
   - 应该自动登录到传输页面

2. 在**设备B**上：
   - 在"Enter Invitation Code"字段中输入设备A的邀请码
   - 点击"Connect"按钮
   - 应该登录到传输页面
   - 在屏幕上应看到"Connected Devices: 2/2"

### 3. 消息传输测试

1. 在**设备A**上：
   - 在消息输入框中输入"Hello from Device A"
   - 点击"Send"按钮

2. 在**设备B**上：
   - 应该看到来自设备A的消息
   - 同样输入"Hello from Device B"并发送
   - 设备A应该收到此消息

### 4. 文件传输测试

1. 在**设备A**上：
   - 点击"Select File"选择一个小文件（如文本文件或小图片）
   - 点击"Send File"按钮
   - 应该看到文件上传进度条

2. 在**设备B**上：
   - 应该看到文件接收进度条
   - 文件接收完成后，应该可以点击"Download"下载文件

## 排错指南

如果测试中出现问题：

1. **检查控制台错误**：
   - 在浏览器中按F12打开开发工具
   - 查看Console选项卡中的错误信息

2. **CORS问题**：
   - 确保测试设备与开发机在同一网络
   - 可以使用Chrome中的CORS Unblock扩展

3. **连接问题**：
   - 确保使用的是开发机的正确IP地址
   - 确保防火墙没有阻止连接
   - 确保端口3000和5235都能访问

4. **设备数量限制问题**：
   - 如果显示"Maximum number of devices"错误
   - 访问`http://172.22.226.182:5235/api/device/clear/{你的邀请码}`清除设备

## 预期结果

成功测试后，两台设备应该能够：
1. 同时登录同一账户
2. 看到对方的在线状态
3. 相互发送和接收文本消息
4. 相互发送和接收文件